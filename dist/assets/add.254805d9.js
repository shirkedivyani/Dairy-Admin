import{b as n,g as f,j as a,a as o,r as l,i as S}from"./vendor.2cd1dd4a.js";import{i as N}from"./lib.9f9f3aed.js";function D(u){const[d,I]=n.exports.useState(localStorage.getItem("auth_token")),[g,b]=n.exports.useState([]),[C,x]=n.exports.useState(null),[e,s]=n.exports.useState({customerId:0,customerName:"",lit:"",fat:"",snf:"",amount:"",milk_type:"Cow"});n.exports.useEffect(()=>{f.get("http://localhost:8000/api/customers",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+d}}).then(t=>{if(t.status===200){let i=[];t.data.map(c=>{i.push({value:c.id,label:c.name})}),b(i)}}).catch(t=>{})},[d]);const h=()=>{s({name:"",mobile:""}),u.setIsAddOpen(!1)},r=t=>{s({...e,[t.target.name]:t.target.value})},v=t=>{s({...e,milk_type:t})},k=(t,i)=>{const{name:c,action:A}=i;let m="",p="";t!=null&&(p=t.label),t!=null&&(m=t.value),c==="customerName"&&m&&(s({...e,customerId:m,customerName:p}),x({label:p,value:m}))},y=()=>{e.customerId===0?alert("Please select customer"):e.lit?e.amount?f.post("http://localhost:8000/api/milks",{customer_id:e.customerId,customer_name:e.customerName,milk_type:e.milk_type,lit:e.lit,fat:e.fat,snf:e.snf,amount:e.amount,is_paid:"No"},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+d}}).then(t=>{t.status===200&&(u.refreshTable(),alert("Milk record added"),h())}).catch(t=>{alert("Please try again")}):alert("Please enter amount"):alert("Please enter Total lit")};return a(n.exports.Fragment,{children:o(l.Dialog,{size:N?"xxl":"md",className:"overflow-scroll z-40",open:u.isAddOpen,handler:h,children:[a(l.DialogHeader,{className:"bg-gray-100 text-center",children:"Add Milk Record"}),a(l.DialogBody,{divider:!0,children:o("div",{className:"flex flex-col gap-3 w-full",children:[o("div",{children:[a("label",{className:"text-xs",id:"aria-label",htmlFor:"aria-select-branch",children:"Select Customer"}),a(S,{"aria-labelledby":"aria-label",inputId:"aria-select-branch",fullWidth:!0,placeholder:"Search and select Customer...",name:"customerName",value:C,defaultOptions:g,onChange:k})]}),o(l.Select,{label:"Select Milk Type *",name:"milk_type",value:e.milk_type,onChange:v,children:[a(l.Option,{value:"Cow",children:"Cow"}),a(l.Option,{value:"Buffalo",children:"Buffalo"})]}),a(l.Input,{label:"Total Lit *",name:"lit",value:e.lit,onChange:r}),a(l.Input,{label:"FAT",name:"fat",value:e.fat,onChange:r}),a(l.Input,{label:"SNF",name:"snf",value:e.snf,onChange:r}),a(l.Input,{label:"Amount *",name:"amount",value:e.amount,onChange:r})]})}),o(l.DialogFooter,{className:"bg-gray-100",children:[a(l.Button,{variant:"text",color:"red",onClick:h,className:"mr-1",children:a("span",{children:"Cancel"})}),a(l.Button,{variant:"gradient",color:"green",onClick:y,children:a("span",{children:"Add"})})]})]})})}export{D as default};
