import{b as s,g,j as a,a as o,r as i,i as I}from"./vendor.2cd1dd4a.js";import{i as N}from"./lib.9f9f3aed.js";function O(l){const[f,S]=s.exports.useState(localStorage.getItem("auth_token")),[_,C]=s.exports.useState([]),[b,p]=s.exports.useState(null),[e,n]=s.exports.useState({customerId:0,customerName:"",lit:"",fat:"",snf:"",amount:"",milk_type:"Cow",is_paid:""});s.exports.useEffect(()=>{l.isEditOpen&&(g.get("http://localhost:8000/api/customers",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+f}}).then(t=>{if(t.status===200){let r=[];t.data.map(m=>{r.push({value:m.id,label:m.name})}),C(r)}}).catch(t=>{}),n({customerId:l.selectedRow.customer_id,customerName:l.selectedRow.customer_name,lit:l.selectedRow.lit,fat:l.selectedRow.fat,snf:l.selectedRow.snf,amount:l.selectedRow.amount,milk_type:l.selectedRow.milk_type,is_paid:l.selectedRow.is_paid}),p({value:l.selectedRow.customer_id,label:l.selectedRow.customer_name}))},[l.isEditOpen]);const u=()=>{n({customerId:0,customerName:"",lit:"",fat:"",snf:"",amount:"",milk_type:"Cow",is_paid:""}),l.setIsEditOpen(!1)},c=t=>{n({...e,[t.target.name]:t.target.value})},v=t=>{n({...e,milk_type:t})},x=t=>{n({...e,is_paid:t})},k=(t,r)=>{const{name:m,action:w}=r;let d="",h="";t!=null&&(h=t.label),t!=null&&(d=t.value),m==="customerName"&&d&&(n({...e,customerId:d,customerName:h}),p({label:h,value:d}))},y=()=>{e.customerId===0?alert("Please select customer"):e.lit?e.amount?g.put(`http://localhost:8000/api/milks/${l.selectedRow.id}`,{customer_id:e.customerId,customer_name:e.customerName,milk_type:e.milk_type,lit:e.lit,fat:e.fat,snf:e.snf,amount:e.amount,is_paid:e.is_paid},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+f}}).then(t=>{t.status===200&&(l.refreshTable(),alert("Milk record updated"),u())}).catch(t=>{alert("Please try again")}):alert("Please enter amount"):alert("Please enter Total lit")};return a(s.exports.Fragment,{children:o(i.Dialog,{size:N?"xxl":"md",className:"overflow-scroll z-40",open:l.isEditOpen,handler:u,children:[a(i.DialogHeader,{className:"bg-gray-100 text-center",children:"Update Milk Record"}),a(i.DialogBody,{divider:!0,children:o("div",{className:"flex flex-col gap-3 w-full",children:[o("div",{children:[a("label",{className:"text-xs",id:"aria-label",htmlFor:"aria-select-branch",children:"Select Customer"}),a(I,{"aria-labelledby":"aria-label",inputId:"aria-select-branch",fullWidth:!0,placeholder:"Search and select Customer...",name:"customerName",value:b,defaultOptions:_,onChange:k})]}),o(i.Select,{label:"Select Milk Type *",name:"milk_type",value:e.milk_type,onChange:v,children:[a(i.Option,{value:"Cow",children:"Cow"}),a(i.Option,{value:"Buffalo",children:"Buffalo"})]}),a(i.Input,{label:"Total Lit *",name:"lit",value:e.lit,onChange:c}),a(i.Input,{label:"FAT",name:"fat",value:e.fat,onChange:c}),a(i.Input,{label:"SNF",name:"snf",value:e.snf,onChange:c}),a(i.Input,{label:"Amount *",name:"amount",value:e.amount,onChange:c}),o(i.Select,{label:"Is Paid *",name:"is_paid",value:e.is_paid,onChange:x,children:[a(i.Option,{value:"Yes",children:"Yes"}),a(i.Option,{value:"No",children:"No"})]})]})}),o(i.DialogFooter,{className:"bg-gray-100",children:[a(i.Button,{variant:"text",color:"red",onClick:u,className:"mr-1",children:a("span",{children:"Cancel"})}),a(i.Button,{variant:"gradient",color:"green",onClick:y,children:a("span",{children:"Update"})})]})]})})}export{O as default};
